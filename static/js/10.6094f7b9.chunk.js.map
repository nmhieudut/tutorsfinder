{"version":3,"sources":["../node_modules/@ant-design/icons-svg/es/asn/SendOutlined.js","../node_modules/@ant-design/icons/es/icons/SendOutlined.js","pages/users/UsersManagement/UsersUpdate.jsx","api/UsersServices.js"],"names":["SendOutlined","props","ref","React","AntdIcon","Object","assign","icon","SendOutlinedSvg","displayName","UsersUpdate","useState","data","setData","loading","setLoading","history","useHistory","_id","match","params","id","useEffect","UsersServices","getDetailUser","then","res","catch","err","openNotificationWithIcon","type","message","description","notification","duration","layout","labelCol","span","wrapperCol","name","onFinish","values","console","log","updatedUser","firstName","lastName","address","email","gender","introduction","phoneNumber","dateOfBirth","moment","updateUser","setTimeout","push","onUpdate","validateMessages","required","types","number","range","initialValues","Item","label","rules","Group","value","onChange","e","_d","format","addonBefore","TextArea","offset","htmlType","disable","getUsers","token","JSON","parse","localStorage","getItem","Promise","resolve","reject","axios","get","headers","Authorization","error","createUser","createdUser","post","put","idUser","deleteUser","delete"],"mappings":"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","file":"static/js/10.6094f7b9.chunk.js","sourcesContent":["// This icon file is generated automatically.\nvar SendOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"defs\", \"attrs\": {}, \"children\": [{ \"tag\": \"style\", \"attrs\": {} }] }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z\" } }] }, \"name\": \"send\", \"theme\": \"outlined\" };\nexport default SendOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport SendOutlinedSvg from \"@ant-design/icons-svg/es/asn/SendOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar SendOutlined = function SendOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: SendOutlinedSvg\n  }));\n};\n\nSendOutlined.displayName = 'SendOutlined';\nexport default React.forwardRef(SendOutlined);","import React, { useEffect, useState } from \"react\";\r\nimport moment from \"moment\";\r\nimport { Form, Input, Button, Radio, DatePicker, notification } from \"antd\";\r\nimport { SendOutlined } from \"@ant-design/icons\";\r\nimport UsersServices from \"../../../api/UsersServices\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction UsersUpdate(props) {\r\n  //console.log(\"param:\", props.match.params.id)\r\n  const dateFormat = \"YYYY/MM/DD\";\r\n  const [data, setData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const history = useHistory();\r\n  const _id = props.match.params.id;\r\n  useEffect(() => {\r\n    UsersServices.getDetailUser(_id)\r\n      .then((res) => {\r\n        setData(res[0].data);\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => setLoading(false));\r\n  }, [props.match.params.id]);\r\n\r\n  const openNotificationWithIcon = (type, message, description) => {\r\n    notification[type]({\r\n      message: message,\r\n      description: description,\r\n      duration: 2,\r\n    });\r\n  };\r\n  const layout = {\r\n    labelCol: { span: 8 },\r\n    wrapperCol: { span: 8 },\r\n  };\r\n  const validateMessages = {\r\n    required: \"${label} is required!\",\r\n    types: {\r\n      email: \"${label} is not validate email!\",\r\n      number: \"${label} is not a validate number!\",\r\n    },\r\n    number: {\r\n      range: \"${label} must be between ${min} and ${max}\",\r\n    },\r\n  };\r\n  const onUpdate = (id, updatedUser) => {\r\n    setLoading(true);\r\n    UsersServices.updateUser(id, updatedUser)\r\n      .then((res) => {\r\n        setLoading(false);\r\n        openNotificationWithIcon(\"success\", \"Success!\", \"Update successfully\");\r\n        setTimeout(() => history.push(\"/home/users\"), 2000);\r\n      })\r\n      .catch((err) => {\r\n        openNotificationWithIcon(\"error\", \"Error!\", \"Update failed\");\r\n        setLoading(false);\r\n      });\r\n  };\r\n  const onFinish = (values) => {\r\n    console.log(values);\r\n    const updatedUser = {\r\n      firstName: values.firstName,\r\n      lastName: values.lastName,\r\n      address: values.address,\r\n      email: values.email,\r\n      gender: values.gender === \"male\" ? 1 : 0,\r\n      introduction: values.introduction,\r\n      phoneNumber: values.phoneNumber,\r\n      dateOfBirth: moment(values.dateOfBirth, \"YYYY/M/D\"),\r\n    };\r\n    onUpdate(data.id, updatedUser);\r\n  };\r\n  return (\r\n    <div>\r\n      {data && (\r\n        <Form\r\n          {...layout}\r\n          name=\"basic\"\r\n          onFinish={onFinish}\r\n          validateMessages={validateMessages}\r\n          initialValues={{\r\n            firstName: data.firstName,\r\n            lastName: data.lastName,\r\n            email: data.email,\r\n            gender: data.gender ? \"male\" : \"female\",\r\n            dateOfBirth: moment(data.dateOfBirth, \"MMM Do YY\"),\r\n            phoneNumber: data.phoneNumber,\r\n            address: data.address,\r\n            introduction: data.introduction,\r\n          }}\r\n        >\r\n          <Form.Item\r\n            name=\"firstName\"\r\n            label=\"First Name\"\r\n            rules={[{ required: true }]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"lastName\"\r\n            label=\"Last Name\"\r\n            rules={[{ required: true }]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"email\"\r\n            label=\"Email\"\r\n            rules={[{ type: \"email\", required: true }]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n          <Form.Item name=\"gender\" label=\"Gender\" rules={[{ required: true }]}>\r\n            <Radio.Group>\r\n              <Radio value=\"male\">Male</Radio>\r\n              <Radio value=\"female\">Female</Radio>\r\n            </Radio.Group>\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"dateOfBirth\"\r\n            label=\"Birthday\"\r\n            rules={[{ required: true }]}\r\n          >\r\n            <DatePicker\r\n              onChange={(e) => console.log(e._d)}\r\n              format={dateFormat}\r\n            />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"phoneNumber\"\r\n            label=\"Phone\"\r\n            rules={[\r\n              { message: \"Please input your phone number!\", required: true },\r\n            ]}\r\n          >\r\n            <Input addonBefore=\"(+84)\" />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"address\"\r\n            label=\"Address\"\r\n            rules={[{ required: true }]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n          <Form.Item name=\"introduction\" label=\"Introduction\">\r\n            <Input.TextArea />\r\n          </Form.Item>\r\n          <Form.Item wrapperCol={{ ...layout.wrapperCol, offset: 8 }}>\r\n            <Button\r\n              type=\"primary\"\r\n              htmlType=\"submit\"\r\n              disable={loading ? 1 : 0}\r\n              loading={loading}\r\n            >\r\n              <SendOutlined />\r\n              {loading ? \"Saving...\" : \"Save\"}\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\nexport default UsersUpdate;\r\n","import axios from \"axios\";\r\n\r\nfunction getUsers() {\r\n  const token = JSON.parse(localStorage.getItem(\"token\"));\r\n  return new Promise((resolve, reject) => {\r\n    axios\r\n      .get(\"http://haimai.ddns.net:9090/api/edu/v1/user\", {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      })\r\n      .then((res) => {\r\n        const data = [];\r\n        data.push(res);\r\n        resolve(data);\r\n        //console.log(\"Data:\", data);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\nfunction getDetailUser(id) {\r\n  const token = JSON.parse(localStorage.getItem(\"token\"));\r\n  return new Promise((resolve, reject) => {\r\n    axios\r\n      .get(`http://haimai.ddns.net:9090/api/edu/v1/user/details/${id}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        params: { id: id },\r\n      })\r\n      .then((res) => {\r\n        const data = [];\r\n        data.push(res);\r\n        resolve(data);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\nfunction createUser(createdUser) {\r\n  return new Promise((resolve, reject) => {\r\n    axios\r\n      .post(\r\n        \"http://haimai.ddns.net:9090/api/auth/v1/user/register\",\r\n        createdUser\r\n      )\r\n      .then((res) => {\r\n        resolve(res);\r\n        console.log(\"Data created:\", res);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\nfunction updateUser(id, updatedUser) {\r\n  const token = JSON.parse(localStorage.getItem(\"token\"));\r\n  return new Promise((resolve, reject) => {\r\n    axios\r\n      .put(`http://haimai.ddns.net:9090/api/edu/v1/user/update`, updatedUser, {\r\n        params: { idUser: id },\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      })\r\n      .then((res) => {\r\n        resolve(res);\r\n        console.log(res);\r\n      })\r\n      .catch((error) => {\r\n        reject(error);\r\n        console.log(error);\r\n      });\r\n  });\r\n}\r\nfunction deleteUser(id) {\r\n  const token = JSON.parse(localStorage.getItem(\"token\"));\r\n  return new Promise((resolve, reject) => {\r\n    axios\r\n      .delete(`http://haimai.ddns.net:9090/api/edu/v1/user/delete`, {\r\n        params: { idUser: id },\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      })\r\n      .then((res) => {\r\n        resolve(res);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\nexport default {\r\n  getUsers,\r\n  getDetailUser,\r\n  createUser,\r\n  updateUser,\r\n  deleteUser,\r\n};\r\n"],"sourceRoot":""}
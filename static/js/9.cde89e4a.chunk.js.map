{"version":3,"sources":["pages/users/UsersManagement/UsersCreate.jsx","api/UsersServices.js"],"names":["Option","Select","React","memo","props","useState","loading","setLoading","history","useHistory","openNotificationWithIcon","type","message","description","notification","duration","layout","labelCol","span","wrapperCol","title","width","onClose","visible","bodyStyle","paddingBottom","name","onFinish","values","createdUser","UsersServices","createUser","then","res","push","catch","err","onCreate","username","password","firstName","lastName","address","email","gender","introduction","phoneNumber","dateOfBirth","moment","authority","validateMessages","required","types","number","range","Item","label","rules","min","Password","Group","value","style","max","format","addonBefore","TextArea","offset","htmlType","disable","getUsers","token","JSON","parse","localStorage","getItem","Promise","resolve","reject","axios","get","headers","Authorization","data","error","console","log","getDetailUser","id","params","post","updateUser","updatedUser","put","idUser","deleteUser","delete"],"mappings":"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","file":"static/js/9.cde89e4a.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\nimport moment from \"moment\";\r\nimport {\r\n  Drawer,\r\n  Form,\r\n  Button,\r\n  Input,\r\n  Radio,\r\n  InputNumber,\r\n  DatePicker,\r\n  Select,\r\n  notification,\r\n} from \"antd\";\r\nimport UsersServices from \"../../../api/UsersServices\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst { Option } = Select;\r\n\r\nfunction UsersCreate(props) {\r\n  const [loading, setLoading] = useState(false);\r\n  const history = useHistory();\r\n  const dateFormat = \"YYYY/MM/DD\";\r\n\r\n  const openNotificationWithIcon = (type, message, description) => {\r\n    notification[type]({\r\n      message: message,\r\n      description: description,\r\n      duration: 2,\r\n    });\r\n  };\r\n  const onCreate = (createdUser) => {\r\n    setLoading(true);\r\n    UsersServices.createUser(createdUser)\r\n      .then((res) => {\r\n        setLoading(false);\r\n        openNotificationWithIcon(\r\n          \"success\",\r\n          \"Success!\",\r\n          \"Register successfully\"\r\n        );\r\n        history.push(\"/users/UsersManagement/Users\");\r\n      })\r\n      .catch((err) => {\r\n        setLoading(false);\r\n        openNotificationWithIcon(\"error\", \"Error!\", err);\r\n      });\r\n  };\r\n  const layout = {\r\n    labelCol: { span: 6 },\r\n    wrapperCol: { span: 14 },\r\n  };\r\n  const validateMessages = {\r\n    required: \"${label} is required!\",\r\n    types: {\r\n      email: \"${label} is not validate email!\",\r\n      number: \"${label} is not a validate number!\",\r\n    },\r\n    number: {\r\n      range: \"${label} must be between ${min} and ${max}\",\r\n    },\r\n  };\r\n  const onFinish = (values) => {\r\n    const createdUser = {\r\n      username: values.username,\r\n      password: values.password,\r\n      firstName: values.firstName,\r\n      lastName: values.lastName,\r\n      address: values.address,\r\n      email: values.email,\r\n      gender: values.gender,\r\n      introduction: values.introduction,\r\n      phoneNumber: values.phoneNumber,\r\n      dateOfBirth: moment(values.dateOfBirth, \"YYYY/M/D\"),\r\n      authority: values.authority,\r\n    };\r\n    onCreate(createdUser);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Drawer\r\n        title=\"Create a new account\"\r\n        width={640}\r\n        onClose={props.onClose}\r\n        visible={props.visible}\r\n        bodyStyle={{ paddingBottom: 80 }}\r\n      >\r\n        <Form\r\n          {...layout}\r\n          name=\"basic\"\r\n          onFinish={onFinish}\r\n          validateMessages={validateMessages}\r\n        >\r\n          <Form.Item\r\n            name=\"firstName\"\r\n            label=\"First Name\"\r\n            rules={[{ required: true }]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"lastName\"\r\n            label=\"Last Name\"\r\n            rules={[{ required: true }]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"username\"\r\n            label=\"User Name\"\r\n            rules={[{ min: 3, required: true }]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            rules={[{ min: 3, required: true }]}\r\n          >\r\n            <Input.Password />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"email\"\r\n            label=\"Email\"\r\n            rules={[{ type: \"email\", required: true }]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n          <Form.Item name=\"gender\" label=\"Gender\" rules={[{ required: true }]}>\r\n            <Radio.Group>\r\n              <Radio value={1}>Male</Radio>\r\n              <Radio value={0}>Female</Radio>\r\n            </Radio.Group>\r\n          </Form.Item>\r\n          <Form.Item name=\"authority\" label=\"Role\">\r\n            <Select style={{ width: 120 }}>\r\n              <Option value=\"ROLE_TUTOR\">Tutor</Option>\r\n              <Option value=\"ROLE_ADMIN\">Admin</Option>\r\n              <Option value=\"ROLE_STUDENT\">Student</Option>\r\n            </Select>\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"age\"\r\n            label=\"Age\"\r\n            rules={[{ type: \"number\", min: 0, max: 100, required: true }]}\r\n          >\r\n            <InputNumber />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"dateOfBirth\"\r\n            label=\"Birthday\"\r\n            rules={[{ required: true }]}\r\n          >\r\n            <DatePicker format={dateFormat} />\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            name=\"phoneNumber\"\r\n            label=\"Phone\"\r\n            rules={[\r\n              { message: \"Please input your phone number!\", required: true },\r\n            ]}\r\n          >\r\n            <Input addonBefore=\"(+84)\" />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"address\"\r\n            label=\"Address\"\r\n            rules={[{ required: true }]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n          <Form.Item name=\"introduction\" label=\"Introduction\">\r\n            <Input.TextArea />\r\n          </Form.Item>\r\n          <Form.Item wrapperCol={{ ...layout.wrapperCol, offset: 6 }}>\r\n            <Button\r\n              type=\"primary\"\r\n              htmlType=\"submit\"\r\n              disable={loading}\r\n              loading={loading}\r\n            >\r\n              {loading ? \"Registering...\" : \"Register\"}\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Drawer>\r\n    </div>\r\n  );\r\n}\r\nexport default React.memo(UsersCreate);\r\n","import axios from \"axios\";\r\n\r\nfunction getUsers() {\r\n  const token = JSON.parse(localStorage.getItem(\"token\"));\r\n  return new Promise((resolve, reject) => {\r\n    axios\r\n      .get(\"http://haimai.ddns.net:9090/api/edu/v1/user\", {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      })\r\n      .then((res) => {\r\n        const data = [];\r\n        data.push(res);\r\n        resolve(data);\r\n        //console.log(\"Data:\", data);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\nfunction getDetailUser(id) {\r\n  const token = JSON.parse(localStorage.getItem(\"token\"));\r\n  return new Promise((resolve, reject) => {\r\n    axios\r\n      .get(`http://haimai.ddns.net:9090/api/edu/v1/user/details/${id}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        params: { id: id },\r\n      })\r\n      .then((res) => {\r\n        const data = [];\r\n        data.push(res);\r\n        resolve(data);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\nfunction createUser(createdUser) {\r\n  return new Promise((resolve, reject) => {\r\n    axios\r\n      .post(\r\n        \"http://haimai.ddns.net:9090/api/auth/v1/user/register\",\r\n        createdUser\r\n      )\r\n      .then((res) => {\r\n        resolve(res);\r\n        console.log(\"Data created:\", res);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\nfunction updateUser(id, updatedUser) {\r\n  const token = JSON.parse(localStorage.getItem(\"token\"));\r\n  return new Promise((resolve, reject) => {\r\n    axios\r\n      .put(`http://haimai.ddns.net:9090/api/edu/v1/user/update`, updatedUser, {\r\n        params: { idUser: id },\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      })\r\n      .then((res) => {\r\n        resolve(res);\r\n        console.log(res);\r\n      })\r\n      .catch((error) => {\r\n        reject(error);\r\n        console.log(error);\r\n      });\r\n  });\r\n}\r\nfunction deleteUser(id) {\r\n  const token = JSON.parse(localStorage.getItem(\"token\"));\r\n  return new Promise((resolve, reject) => {\r\n    axios\r\n      .delete(`http://haimai.ddns.net:9090/api/edu/v1/user/delete`, {\r\n        params: { idUser: id },\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      })\r\n      .then((res) => {\r\n        resolve(res);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\nexport default {\r\n  getUsers,\r\n  getDetailUser,\r\n  createUser,\r\n  updateUser,\r\n  deleteUser,\r\n};\r\n"],"sourceRoot":""}